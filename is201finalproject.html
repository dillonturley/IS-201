<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Color Palette Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 900px;
            width: 100%;
            padding: 40px;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        label {
            font-weight: 600;
            color: #555;
            font-size: 0.9em;
        }

        input, select {
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            align-self: flex-end;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .palette-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .color-box {
            aspect-ratio: 1;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 15px;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .color-box:hover {
            transform: scale(1.05);
        }

        .color-code {
            background: rgba(255,255,255,0.9);
            padding: 8px;
            border-radius: 6px;
            text-align: center;
            font-weight: 600;
            font-size: 0.9em;
            color: #333;
        }

        .ai-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
        }

        .ai-section h2 {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-icon {
            font-size: 1.5em;
        }

        .ai-content {
            color: #555;
            line-height: 1.8;
            white-space: pre-wrap;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
            font-style: italic;
        }

        .error {
            background: #fee;
            border: 2px solid #fcc;
            border-radius: 8px;
            padding: 15px;
            color: #c33;
            margin-top: 15px;
        }

        .copy-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4caf50;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        .copy-notification.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® AI Color Palette Generator</h1>
        <p class="subtitle">Generate beautiful color palettes and get AI-powered design suggestions</p>

        <div class="controls">
            <div class="input-group">
                <label for="baseColor">Base Color</label>
                <input type="color" id="baseColor" value="#667eea">
            </div>
            <div class="input-group">
                <label for="scheme">Color Scheme</label>
                <select id="scheme">
                    <option value="complementary">Complementary</option>
                    <option value="analogous">Analogous</option>
                    <option value="triadic">Triadic</option>
                    <option value="monochromatic">Monochromatic</option>
                </select>
            </div>
            <div class="input-group">
                <label for="usage">Usage Context</label>
                <select id="usage">
                    <option value="web">Web Design</option>
                    <option value="branding">Branding</option>
                    <option value="art">Digital Art</option>
                    <option value="interior">Interior Design</option>
                </select>
            </div>
            <div class="input-group">
                <label>&nbsp;</label>
                <button onclick="generatePalette()" id="generateBtn">Generate Palette</button>
            </div>
        </div>

        <div class="palette-display" id="paletteDisplay"></div>

        <div class="ai-section" id="aiSection" style="display: none;">
            <h2><span class="ai-icon">ü§ñ</span> AI Design Suggestions</h2>
            <div class="ai-content" id="aiContent"></div>
        </div>
    </div>

    <div class="copy-notification" id="copyNotif">Color copied to clipboard!</div>

    <script>
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        function rgbToHex(r, g, b) {
            return "#" + [r, g, b].map(x => {
                const hex = x.toString(16);
                return hex.length === 1 ? "0" + hex : hex;
            }).join('');
        }

        function rgbToHsl(r, g, b) {
            r /= 255;
            g /= 255;
            b /= 255;
            const max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
                    case g: h = ((b - r) / d + 2) / 6; break;
                    case b: h = ((r - g) / d + 4) / 6; break;
                }
            }
            return { h: h * 360, s: s * 100, l: l * 100 };
        }

        function hslToRgb(h, s, l) {
            h /= 360;
            s /= 100;
            l /= 100;
            let r, g, b;

            if (s === 0) {
                r = g = b = l;
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };
                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }
            return {
                r: Math.round(r * 255),
                g: Math.round(g * 255),
                b: Math.round(b * 255)
            };
        }

        function generateColorScheme(baseHex, scheme) {
            const rgb = hexToRgb(baseHex);
            const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
            const colors = [baseHex];

            switch (scheme) {
                case 'complementary':
                    const comp = hslToRgb((hsl.h + 180) % 360, hsl.s, hsl.l);
                    colors.push(rgbToHex(comp.r, comp.g, comp.b));
                    colors.push(rgbToHex(...Object.values(hslToRgb(hsl.h, hsl.s, Math.max(10, hsl.l - 20)))));
                    colors.push(rgbToHex(...Object.values(hslToRgb(hsl.h, hsl.s, Math.min(90, hsl.l + 20)))));
                    colors.push(rgbToHex(...Object.values(hslToRgb((hsl.h + 180) % 360, hsl.s * 0.7, hsl.l))));
                    break;
                case 'analogous':
                    for (let i = 1; i <= 4; i++) {
                        const angle = (hsl.h + (i * 30)) % 360;
                        const analogRgb = hslToRgb(angle, hsl.s, hsl.l);
                        colors.push(rgbToHex(analogRgb.r, analogRgb.g, analogRgb.b));
                    }
                    break;
                case 'triadic':
                    for (let i = 1; i <= 2; i++) {
                        const angle = (hsl.h + (i * 120)) % 360;
                        const triadRgb = hslToRgb(angle, hsl.s, hsl.l);
                        colors.push(rgbToHex(triadRgb.r, triadRgb.g, triadRgb.b));
                    }
                    colors.push(rgbToHex(...Object.values(hslToRgb(hsl.h, hsl.s, Math.max(10, hsl.l - 25)))));
                    colors.push(rgbToHex(...Object.values(hslToRgb(hsl.h, hsl.s, Math.min(90, hsl.l + 25)))));
                    break;
                case 'monochromatic':
                    for (let i = 1; i <= 4; i++) {
                        const lightness = Math.max(10, Math.min(90, hsl.l + (i * 15) - 30));
                        const monoRgb = hslToRgb(hsl.h, hsl.s, lightness);
                        colors.push(rgbToHex(monoRgb.r, monoRgb.g, monoRgb.b));
                    }
                    break;
            }

            return colors;
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                const notif = document.getElementById('copyNotif');
                notif.classList.add('show');
                setTimeout(() => notif.classList.remove('show'), 2000);
            });
        }

        async function getAISuggestions(colors, scheme, usage) {
            const prompt = `I have generated a ${scheme} color palette with these colors: ${colors.join(', ')}. 
            
This palette is intended for ${usage}. Please provide:
1. A brief analysis of the palette's mood and visual impact (2-3 sentences)
2. Specific usage recommendations for each color (which should be primary, accent, background, etc.)
3. One practical tip for implementing this palette effectively in ${usage}

Keep the response concise, practical, and organized with clear sections.`;

            const response = await fetch("https://api.anthropic.com/v1/messages", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    model: "claude-sonnet-4-20250514",
                    max_tokens: 1000,
                    messages: [
                        { role: "user", content: prompt }
                    ],
                })
            });

            const data = await response.json();
            return data.content[0].text;
        }

        async function generatePalette() {
            const baseColor = document.getElementById('baseColor').value;
            const scheme = document.getElementById('scheme').value;
            const usage = document.getElementById('usage').value;
            const btn = document.getElementById('generateBtn');
            
            btn.disabled = true;
            btn.textContent = 'Generating...';

            const colors = generateColorScheme(baseColor, scheme);
            const display = document.getElementById('paletteDisplay');
            display.innerHTML = '';

            colors.forEach(color => {
                const box = document.createElement('div');
                box.className = 'color-box';
                box.style.backgroundColor = color;
                box.innerHTML = `<div class="color-code">${color.toUpperCase()}</div>`;
                box.onclick = () => copyToClipboard(color);
                box.title = 'Click to copy';
                display.appendChild(box);
            });

            const aiSection = document.getElementById('aiSection');
            const aiContent = document.getElementById('aiContent');
            aiSection.style.display = 'block';
            aiContent.innerHTML = '<div class="loading">ü§î Analyzing palette and generating suggestions...</div>';

            try {
                const suggestions = await getAISuggestions(colors, scheme, usage);
                aiContent.textContent = suggestions;
            } catch (error) {
                aiContent.innerHTML = '<div class="error">‚ö†Ô∏è Unable to generate AI suggestions. Please try again.</div>';
            }

            btn.disabled = false;
            btn.textContent = 'Generate Palette';
        }

        // Generate initial palette on load
        window.onload = () => generatePalette();
    </script>
</body>
</html>